import e from"eventemitter3";import{useRef as n,useCallback as t,createContext as r,useContext as i}from"react";import{forIn as o}from"lodash";import{useIsomorphicLayoutEffect as u}from"react-use";import{jsx as a}from"react/jsx-runtime";import{nanoid as c}from"nanoid";var l=new e;l.emit=function(){var e,n=[].slice.call(arguments),t=String(n[0]),r=n[0].uuid;return r&&d(t,r),(e=this.constructor.prototype.emit).call.apply(e,[this].concat(n))};var s,f=new Map,d=function(e,n){f.has(e)&&f.get(e)!==n&&console.warn('Another event named "'+e+'" already exists. Duplicate events share the same listener. This can lead to unexpected issues if their payload differs. Make sure to call the `createEvent` function only once per event and reuse the resulting functions throughout your application.'),f.set(e,n)},p=l,m=function(e,n){void 0===n&&(n=p),u(function(){return o(e,function(e,t){n.addListener(t,e)}),function(){o(e,function(e,t){n.removeListener(t,e)})}},[e])},v=function(e,n,t){void 0===t&&(t=p),u(function(){return t.addListener(e,n),function(){t.removeListener(e,n)}},[n])},h=function(e){var r=n(function(){throw new Error("Cannot call an event handler during the first render.")});return u(function(){r.current=e}),t(function(){var e;return null==(e=r.current)?void 0:e.apply(null,[].slice.call(arguments))},[])},y=/*#__PURE__*/r(),w=function(e){var n=e.emitter,t=null!=n?n:p,r={emitter:t,emit:function(){return t.emit.apply(t,[].slice.call(arguments))},useListener:function(e,n){return v(e,n,t)},useListeners:function(e){return m(e,t)}};/*#__PURE__*/return a(y.Provider,{value:r,children:e.children})},g=function(){return i(y)},E=y,L=!("undefined"==typeof window||null==(s=window.document)||!s.createElement),b=function(e,n){var t;void 0===n&&(n={});var r=null!=(t=n.emitter)?t:p;return[function(n){L?r.emit(e,n):console.warn('Could not emit "'+e+'" event. Events cannot be emitted from the server.')},function(n){var t=h(n);u(function(){return r.addListener(e,t),function(){r.removeListener(e,t)}},[t])}]};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},j.apply(this,arguments)}function x(e,n){function t(){var t=[].slice.call(arguments);if(n){var r=n.apply(void 0,t);if(!r)throw new Error("prepareAction did not return an object");return j({type:e,payload:r.payload},"meta"in r&&{meta:r.meta},"error"in r&&{error:r.error})}return{type:e,payload:t[0]}}return t.toString=function(){return""+e},t.uuid=c(),t.type=e,t.match=function(n){return n.type===e},t}function O(){}export{E as EventEmitterContext,w as EventEmitterProvider,O as EventOpen,x as createAction,b as createEvent,p as emitter,h as useEvent,g as useEventEmitter,v as useEventListener,m as useEventListeners};
//# sourceMappingURL=index.mjs.map
